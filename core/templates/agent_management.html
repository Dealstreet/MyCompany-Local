{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold m-0" style="color: #1e293b;">ì§ì› ê´€ë¦¬</h3>
        <a href="{% url 'agent_create' %}" class="btn btn-primary rounded-pill px-4 fw-bold">
            + ì§ì› ë“±ë¡
        </a>
    </div>

    <div class="row g-4">
        {% for agent in agents %}
        <div class="col-12 col-md-6 col-lg-4 col-xl-3">
            <div class="card h-100 border-0 shadow-sm" style="border-radius: 20px; transition: transform 0.2s;">
                <div class="card-body p-4 d-flex flex-column align-items-center text-center">
                    <div class="mb-3 position-relative">
                        {% if agent.profile_image %}
                        <img src="{{ agent.profile_image.url }}" class="rounded-circle object-fit-cover border"
                            style="width: 80px; height: 80px;" alt="{{ agent.name }}">
                        {% else %}
                        <div class="rounded-circle bg-light d-flex align-items-center justify-content-center border"
                            style="width: 80px; height: 80px; font-size: 32px;">
                            ğŸ¤–
                        </div>
                        {% endif %}
                        <span class="position-absolute bottom-0 end-0 badge rounded-pill bg-dark border border-white">
                            {{ agent.model_name }}
                        </span>
                    </div>

                    <h5 class="fw-bold mb-1">{{ agent.name }} <span class="text-muted small fw-normal">{{ agent.position
                            }}</span></h5>
                    <p class="text-secondary mb-2 small">{{ agent.department_obj.name|default:"ì†Œì†ë¯¸ì •" }}</p>

                    <div class="bg-light rounded p-2 mb-3 w-100 text-start">
                        <small class="d-block text-truncate text-muted" title="{{ agent.role }}">
                            <strong>Role:</strong> {{ agent.role }}
                        </small>
                    </div>

                    <div class="mt-auto d-flex gap-2 w-100">
                        <a href="{% url 'agent_edit' agent.pk %}"
                            class="btn btn-outline-secondary btn-sm flex-fill rounded-pill">
                            ìˆ˜ì •
                        </a>
                        <form action="{% url 'agent_delete' agent.pk %}" method="post" class="flex-fill"
                            onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-danger btn-sm w-100 rounded-pill">
                                ì‚­ì œ
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5 text-muted">
            <div style="font-size: 48px; margin-bottom: 20px;">ğŸ¤–</div>
            <p>ë“±ë¡ëœ ì§ì›ì´ ì—†ìŠµë‹ˆë‹¤.<br>ìƒˆë¡œìš´ AI ì§ì›ì„ ë“±ë¡í•´ì£¼ì„¸ìš”.</p>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05) !important;
    }
</style>
{% endblock %}